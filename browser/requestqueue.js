!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.RequestQueue=e()}}(function(){var define,module,exports;return function e(t,o,r){function n(i,u){if(!o[i]){if(!t[i]){var a="function"==typeof require&&require;if(!u&&a)return a(i,!0);if(s)return s(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var p=o[i]={exports:{}};t[i][0].call(p.exports,function(e){var o=t[i][1][e];return n(o?o:e)},p,p.exports,e,t,o,r)}return o[i].exports}for(var s="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n}({1:[function(require,module,exports){"use strict";function getHostKey(e,t){var o,r="",n=parseUrl(e);return null===n.protocol||null===n.hostname?new Error("Invalid URI"):(n.protocol.indexOf(":")===n.protocol.length-1&&(n.protocol=n.protocol.substr(0,n.protocol.length-1)),null===n.port&&void 0!==t.defaultPorts[n.protocol]&&(n.port=t.defaultPorts[n.protocol]),t.ignoreSchemes===!1&&(r+=n.protocol+"://"),t.ignoreSubdomains===!1?r+=n.hostname:(o=parseDomain(n.hostname),r+=null===o?n.hostname:o.domain+"."+o.tld),t.ignorePorts===!1&&null!==n.port&&(r+=":"+n.port),r+="/")}var parseDomain,parseUrl,_process;try{_process=eval("process")}catch(e){}"object"==typeof _process&&"[object process]"===_process.toString()?(parseDomain=require("parse-domain"),parseUrl=require("url").parse):(parseDomain=function(){return null},parseUrl=require("url-parse")),module.exports=getHostKey},{"parse-domain":void 0,url:void 0,"url-parse":5}],2:[function(e,t){"use strict";function o(){return Math.floor(Date.now()*Math.random()*Math.random())}t.exports=o},{}],3:[function(e,t){"use strict";function o(e,t){this.activeHosts={},this.items={},this.priorityQueue=[],this.activeSockets=0,this.handlers=t||{},this.options=f({},l,e),this.paused=!1}function r(e,t){t.options.rateLimit>0?setTimeout(function(){e.callback(null,e.id,e.url)},t.options.rateLimit):e.callback(null,e.id,e.url)}function n(e,t){"function"==typeof t.handlers[e]&&t.handlers[e]()}function s(e,t){var o=t.priorityQueue.indexOf(e.id);return 0>o?!1:(t.priorityQueue.splice(o,1),!0)}function i(e,t,o,r){var n=c(e,r.options);return n instanceof Error?(o(n),!1):(void 0===t&&(t=p()),void 0!==r.items[t]?(o(new Error("Invalid ID"),t,e),!1):(r.items[t]={callback:o,url:e,id:t,hostKey:n},r.priorityQueue.push(t),!0))}function u(e,t){t.activeHosts[e.hostKey]--,t.activeHosts[e.hostKey]<=0&&delete t.activeHosts[e.hostKey],delete t.items[e.id]}function a(e){var t,o,n=e.options.maxSockets-e.activeSockets,i=0;if(e.paused!==!0&&!(0>=n))for(;i<e.priorityQueue.length;)if(t=!1,o=e.items[e.priorityQueue[i]],e.options.maxSocketsPerHost>0&&(void 0===e.activeHosts[o.hostKey]?(e.activeHosts[o.hostKey]=1,t=!0):e.activeHosts[o.hostKey]<e.options.maxSocketsPerHost&&(e.activeHosts[o.hostKey]++,t=!0)),t===!0){if(e.activeSockets++,n--,s(o,e),r(o,e),0>=n)break}else i++}var c=e("./getHostKey"),p=e("./getId"),f=e("object-assign"),l={defaultPorts:{ftp:21,http:80,https:443},ignorePorts:!0,ignoreSchemes:!0,ignoreSubdomains:!0,maxSockets:1/0,maxSocketsPerHost:1,rateLimit:0};o.prototype.dequeue=function(e){var t,o=this.items[e];return void 0===o?!1:(t=s(o,this),t===!1&&this.activeSockets--,u(o,this),a(this),0===this.priorityQueue.length&&0===this.activeSockets&&n("drain",this),!0)},o.prototype.enqueue=function(e,t,o){"function"==typeof t&&(o=t,t=void 0);var r=i(e,t,o,this);return r===!1?!1:(a(this),!0)},o.prototype.pause=function(){this.paused=!0},o.prototype.resume=function(){this.paused=!1,a(this)},t.exports=o},{"./getHostKey":1,"./getId":2,"object-assign":4}],4:[function(e,t){"use strict";function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}t.exports=Object.assign||function(e){for(var t,r,n=o(e),s=1;s<arguments.length;s++){t=arguments[s],r=Object.keys(Object(t));for(var i=0;i<r.length;i++)n[r[i]]=t[r[i]]}return n}},{}],5:[function(e,t){"use strict";function o(e,t,a){if(!(this instanceof o))return new o(e,t,a);var c,p,f,l,h=i.test(e),d=typeof t,y=this,m=0;for("object"!==d&&"string"!==d&&(a=t,t=null),a&&"function"!=typeof a&&(a=s.parse),t=n(t);m<u.length;m++)p=u[m],c=p[0],l=p[1],c!==c?y[l]=e:"string"==typeof c?~(f=e.indexOf(c))&&("number"==typeof p[2]?(y[l]=e.slice(0,f),e=e.slice(f+p[2])):(y[l]=e.slice(f),e=e.slice(0,f))):(f=c.exec(e))&&(y[l]=f[1],e=e.slice(0,e.length-f[0].length)),y[l]=y[l]||(p[3]||"port"===l&&h?t[l]||"":""),p[4]&&(y[l]=y[l].toLowerCase());a&&(y.query=a(y.query)),r(y.port,y.protocol)||(y.host=y.hostname,y.port=""),y.username=y.password="",y.auth&&(p=y.auth.split(":"),y.username=p[0]||"",y.password=p[1]||""),y.href=y.toString()}var r=e("requires-port"),n=e("./lolcation"),s=e("querystringify"),i=/^\/(?!\/)/,u=[["#","hash"],["?","query"],["//","protocol",2,1,1],["/","pathname"],["@","auth",1],[0/0,"host",void 0,1,1],[/\:(\d+)$/,"port"],[0/0,"hostname",void 0,1,1]];o.prototype.set=function(e,t,o){var n=this;return"query"===e?("string"==typeof t&&(t=(o||s.parse)(t)),n[e]=t):"port"===e?(n[e]=t,r(t,n.protocol)?t&&(n.host=n.hostname+":"+t):(n.host=n.hostname,n[e]="")):"hostname"===e?(n[e]=t,n.port&&(t+=":"+n.port),n.host=t):"host"===e?(n[e]=t,/\:\d+/.test(t)&&(t=t.split(":"),n.hostname=t[0],n.port=t[1])):n[e]=t,n.href=n.toString(),n},o.prototype.toString=function(e){e&&"function"==typeof e||(e=s.stringify);var t,o=this,r=o.protocol+"//";return o.username&&(r+=o.username+":"+o.password+"@"),r+=o.hostname,o.port&&(r+=":"+o.port),r+=o.pathname,o.query&&(t="object"==typeof o.query?e(o.query):o.query,r+=("?"===t.charAt(0)?"":"?")+t),o.hash&&(r+=o.hash),r},o.qs=s,o.location=n,t.exports=o},{"./lolcation":6,querystringify:7,"requires-port":8}],6:[function(e,t){(function(o){"use strict";var r,n={hash:1,query:1};t.exports=function(t){t=t||o.location||{},r=r||e("./");var s,i={},u=typeof t;if("blob:"===t.protocol)i=new r(unescape(t.pathname),{});else if("string"===u){i=new r(t,{});for(s in n)delete i[s]}else if("object"===u)for(s in t)s in n||(i[s]=t[s]);return i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./":5}],7:[function(e,t,o){"use strict";function r(e){for(var t,o=/([^=?&]+)=([^&]*)/g,r={};t=o.exec(e);r[decodeURIComponent(t[1])]=decodeURIComponent(t[2]));return r}function n(e,t){t=t||"";var o=[];"string"!=typeof t&&(t="?");for(var r in e)s.call(e,r)&&o.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t+o.join("&")}var s=Object.prototype.hasOwnProperty;o.stringify=n,o.parse=r},{}],8:[function(e,t){"use strict";t.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 22!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},{}]},{},[3])(3)});