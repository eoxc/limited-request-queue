{"version":3,"file":"normalizeURL.js","names":["options","optionOverrides","hostname","port","protocol","ignorePorts","ignoreProtocols","ignoreSubdomains","key","parseDomain","domain","tld","undefined"],"sources":["../lib/normalizeURL.js"],"sourcesContent":["import parseDomain from \"parse-domain\";\n\n\n\n/**\n * Produce a normalized URL.\n * @param {URL} url\n * @param {object} options\n * @param {object} [optionOverrides]\n * @returns {string}\n */\nexport default ({hostname, port, protocol}, options, optionOverrides) =>\n{\n\tconst ignorePorts      = optionOverrides?.ignorePorts      ?? options.ignorePorts;\n\tconst ignoreProtocols  = optionOverrides?.ignoreProtocols  ?? options.ignoreProtocols;\n\tconst ignoreSubdomains = optionOverrides?.ignoreSubdomains ?? options.ignoreSubdomains;\n\n\tlet key = \"\";\n\n\tif (!ignoreProtocols)\n\t{\n\t\tkey += `${protocol}//`;\n\t}\n\n\tif (!ignoreSubdomains)\n\t{\n\t\tkey += hostname;\n\t}\n\telse\n\t{\n\t\t// Returns `null` if unknown top-level domain or running in a browser\n\t\tconst {domain, tld} = parseDomain(hostname) ?? {};\n\n\t\tif (domain===undefined && tld===undefined)\n\t\t{\n\t\t\tkey += hostname;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tkey += `${domain}.${tld}`;\n\t\t}\n\t}\n\n\tif (!ignorePorts && port!==\"\")\n\t{\n\t\tkey += `:${port}`;\n\t}\n\n\treturn key;\n};\n"],"mappings":";;;;;;;AAAA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;eACe,wBAA6BA,OAA7B,EAAsCC,eAAtC,EACf;EAAA;;EAAA,IADiBC,QACjB,QADiBA,QACjB;EAAA,IAD2BC,IAC3B,QAD2BA,IAC3B;EAAA,IADiCC,QACjC,QADiCA,QACjC;EACC,IAAMC,WAAW,4BAAQJ,eAAR,aAAQA,eAAR,uBAAQA,eAAe,CAAEI,WAAzB,yEAA6CL,OAAO,CAACK,WAAtE;EACA,IAAMC,eAAe,6BAAIL,eAAJ,aAAIA,eAAJ,uBAAIA,eAAe,CAAEK,eAArB,2EAAyCN,OAAO,CAACM,eAAtE;EACA,IAAMC,gBAAgB,6BAAGN,eAAH,aAAGA,eAAH,uBAAGA,eAAe,CAAEM,gBAApB,2EAAwCP,OAAO,CAACO,gBAAtE;EAEA,IAAIC,GAAG,GAAG,EAAV;;EAEA,IAAI,CAACF,eAAL,EACA;IACCE,GAAG,cAAOJ,QAAP,OAAH;EACA;;EAED,IAAI,CAACG,gBAAL,EACA;IACCC,GAAG,IAAIN,QAAP;EACA,CAHD,MAKA;IAAA;;IACC;IACA,4BAAsB,IAAAO,wBAAA,EAAYP,QAAZ,CAAtB,uDAA+C,EAA/C;IAAA,IAAOQ,MAAP,SAAOA,MAAP;IAAA,IAAeC,GAAf,SAAeA,GAAf;;IAEA,IAAID,MAAM,KAAGE,SAAT,IAAsBD,GAAG,KAAGC,SAAhC,EACA;MACCJ,GAAG,IAAIN,QAAP;IACA,CAHD,MAKA;MACCM,GAAG,cAAOE,MAAP,cAAiBC,GAAjB,CAAH;IACA;EACD;;EAED,IAAI,CAACN,WAAD,IAAgBF,IAAI,KAAG,EAA3B,EACA;IACCK,GAAG,eAAQL,IAAR,CAAH;EACA;;EAED,OAAOK,GAAP;AACA,C"}