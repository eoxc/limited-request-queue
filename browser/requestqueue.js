!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.RequestQueue=t()}}(function(){var define,module,exports;return function t(e,i,r){function o(s,u){if(!i[s]){if(!e[s]){var c="function"==typeof require&&require;if(!u&&c)return c(s,!0);if(n)return n(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var p=i[s]={exports:{}};e[s][0].call(p.exports,function(t){var i=e[s][1][t];return o(i?i:t)},p,p.exports,t,e,i,r)}return i[s].exports}for(var n="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,i){"use strict";var r={defaultPorts:{ftp:21,http:80,https:443},ignorePorts:!0,ignoreSchemes:!0,ignoreSubdomains:!0,maxSockets:1/0,maxSocketsPerHost:1,rateLimit:0};e.exports=r},{}],2:[function(require,module,exports){"use strict";function getHostKey(t,e){var i,r,o,n;if(null==t)return!1;if(isString(t)===!0)try{t=new URL(t)}catch(t){return!1}return o=t.protocol,isEmptyString(o)!==!0&&isEmptyString(t.hostname)!==!0&&(o.indexOf(":")===o.length-1&&(o=o.substr(0,o.length-1)),r=t.port,isEmptyStringOrNumber(r)===!0&&void 0!==e.defaultPorts[o]&&(r=e.defaultPorts[o]),i="",e.ignoreSchemes===!1&&(i+=o+"://"),e.ignoreSubdomains===!1?i+=t.hostname:(n=parseDomain(t.hostname),i+=null===n?t.hostname:n.domain+"."+n.tld),e.ignorePorts===!1&&null!=r&&(i+=":"+r),i+="/")}function isEmptyString(t){return""===t||null==t||isString(t)===!1}function isEmptyStringOrNumber(t){return""===t||null==t||isNaN(t)===!0}var isBrowser=require("is-browser"),isString=require("is-string"),parseDomain,_require,URL;isBrowser===!0?(parseDomain=function(){return null},URL=window.URL):(_require=eval("require"),parseDomain=_require("parse-domain"),URL=_require("whatwg-url").URL),module.exports=getHostKey},{"is-browser":4,"is-string":5}],3:[function(t,e,i){"use strict";function r(t,e){this.activeHosts={},this.items={},this.priorityQueue=[],this.activeSockets=0,this.counter=0,this.handlers=e||{},this.options=Object.assign({},p,t),this.paused=!1}function o(t,e,i){"function"==typeof t&&(i>0?setTimeout(function(){t.apply(null,e)},i):t.apply(null,e))}function n(t,e){var i=e.priorityQueue.indexOf(t.id);return!(i<0)&&(e.priorityQueue.splice(i,1),!0)}function s(t,e){var i=f(t.url,e.options),r=t.id;return i===!1?new TypeError("Invalid URL"):(null==r&&(r=e.counter++),void 0!==e.items[r]?new Error("Non-unique ID"):(e.items[r]={active:!1,hostKey:i,id:r,input:t},e.priorityQueue.push(r),r))}function u(t,e){return function(){e.activeSockets--,c(t,e),a(e)}}function c(t,e){e.activeHosts[t.hostKey]--,e.activeHosts[t.hostKey]<=0&&delete e.activeHosts[t.hostKey],delete e.items[t.id],e.priorityQueue.length<=0&&e.activeSockets<=0&&(e.counter=0,o(e.handlers.end,[]))}function a(t){var e,i,r=t.options.maxSockets-t.activeSockets,s=0;if(t.paused!==!0&&!(r<=0))for(;s<t.priorityQueue.length;)if(e=!1,i=t.items[t.priorityQueue[s]],t.options.maxSocketsPerHost>0&&(void 0===t.activeHosts[i.hostKey]?(t.activeHosts[i.hostKey]=1,e=!0):t.activeHosts[i.hostKey]<t.options.maxSocketsPerHost&&(t.activeHosts[i.hostKey]++,e=!0)),e===!0){if(t.activeSockets++,r--,i.active=!0,n(i,t),o(t.handlers.item,[i.input,u(i,t)],t.options.rateLimit),r<=0)break}else s++}var p=t("./defaultOptions"),f=t("./getHostKey"),l=t("is-string");r.prototype.dequeue=function(t){var e=this.items[t];return void 0===e||e.active===!0?new Error("ID not found"):(n(e,this),c(e,this),!0)},r.prototype.enqueue=function(t){var e;return null!=t&&l(t)!==!0||(t={url:t}),e=s(t,this),e instanceof Error==!1&&a(this),e},r.prototype.length=function(){return this.priorityQueue.length+this.activeSockets},r.prototype.numActive=function(){return this.activeSockets},r.prototype.numQueued=function(){return this.priorityQueue.length},r.prototype.pause=function(){this.paused=!0},r.prototype.resume=function(){this.paused=!1,a(this)},e.exports=r},{"./defaultOptions":1,"./getHostKey":2,"is-string":5}],4:[function(t,e,i){e.exports=!0},{}],5:[function(t,e,i){"use strict";var r=String.prototype.valueOf,o=function(t){try{return r.call(t),!0}catch(t){return!1}},n=Object.prototype.toString,s="[object String]",u="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(t){return"string"==typeof t||"object"==typeof t&&(u?o(t):n.call(t)===s)}},{}]},{},[3])(3)});