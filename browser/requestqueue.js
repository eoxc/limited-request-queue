!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.RequestQueue=t()}}(function(){return function t(e,o,n){function i(s,u){if(!o[s]){if(!e[s]){var c="function"==typeof require&&require;if(!u&&c)return c(s,!0);if(r)return r(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var a=o[s]={exports:{}};e[s][0].call(a.exports,function(t){var o=e[s][1][t];return i(o?o:t)},a,a.exports,t,e,o,n)}return o[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,o){"use strict";var n={defaultPorts:{ftp:21,http:80,https:443},ignorePorts:!0,ignoreSchemes:!0,ignoreSubdomains:!0,maxSockets:1/0,maxSocketsPerHost:1,rateLimit:0};e.exports=n},{}],2:[function(t,e,o){"use strict";function n(t,e){var o,n,s,a;if(null==t)return!1;if(u(t)===!0)try{t=new f(t)}catch(t){return!1}return s=t.protocol,i(s)!==!0&&i(t.hostname)!==!0&&(s.indexOf(":")===s.length-1&&(s=s.substr(0,s.length-1)),n=t.port,r(n)===!0&&void 0!==e.defaultPorts[s]&&(n=e.defaultPorts[s]),o="",e.ignoreSchemes===!1&&(o+=s+"://"),e.ignoreSubdomains===!1?o+=t.hostname:(a=c(t.hostname),o+=null===a?t.hostname:a.domain+"."+a.tld),e.ignorePorts===!1&&null!=n&&(o+=":"+n),o+="/")}function i(t){return""===t||null==t||u(t)===!1}function r(t){return""===t||null==t||isNaN(t)===!0}var s=t("broquire")(t),u=t("is-string"),c=s("parse-domain",function(){return null}),f=s("whatwg-url","window").URL;e.exports=n},{broquire:4,"is-string":6}],3:[function(t,e,o){"use strict";function n(t,e){this.activeHosts={},this.items={},this.priorityQueue=[],this.activeSockets=0,this.counter=0,this.handlers=e||{},this.options=Object.assign({},a,t),this.paused=!1}function i(t,e,o){"function"==typeof t&&(o>0?setTimeout(function(){t.apply(null,e)},o):t.apply(null,e))}function r(t,e){var o=e.priorityQueue.indexOf(t.id);return!(o<0)&&(e.priorityQueue.splice(o,1),!0)}function s(t,e){var o=p(t.url,e.options),n=t.id;return o===!1?new TypeError("Invalid URL"):(null==n&&(n=e.counter++),void 0!==e.items[n]?new Error("Non-unique ID"):(e.items[n]={active:!1,hostKey:o,id:n,input:t},e.priorityQueue.push(n),n))}function u(t,e){return function(){e.activeSockets--,c(t,e),f(e)}}function c(t,e){e.activeHosts[t.hostKey]--,e.activeHosts[t.hostKey]<=0&&delete e.activeHosts[t.hostKey],delete e.items[t.id],e.priorityQueue.length<=0&&e.activeSockets<=0&&(e.counter=0,i(e.handlers.end,[]))}function f(t){var e,o,n=t.options.maxSockets-t.activeSockets,s=0;if(t.paused!==!0&&!(n<=0))for(;s<t.priorityQueue.length;)if(e=!1,o=t.items[t.priorityQueue[s]],t.options.maxSocketsPerHost>0&&(void 0===t.activeHosts[o.hostKey]?(t.activeHosts[o.hostKey]=1,e=!0):t.activeHosts[o.hostKey]<t.options.maxSocketsPerHost&&(t.activeHosts[o.hostKey]++,e=!0)),e===!0){if(t.activeSockets++,n--,o.active=!0,r(o,t),i(t.handlers.item,[o.input,u(o,t)],t.options.rateLimit),n<=0)break}else s++}var a=t("./defaultOptions"),p=t("./getHostKey"),l=t("is-string");n.prototype.dequeue=function(t){var e=this.items[t];return void 0===e||e.active===!0?new Error("ID not found"):(r(e,this),c(e,this),!0)},n.prototype.enqueue=function(t){var e;return null!=t&&l(t)!==!0||(t={url:t}),e=s(t,this),e instanceof Error==!1&&f(this),e},n.prototype.length=function(){return this.priorityQueue.length+this.activeSockets},n.prototype.numActive=function(){return this.activeSockets},n.prototype.numQueued=function(){return this.priorityQueue.length},n.prototype.pause=function(){this.paused=!0},n.prototype.resume=function(){this.paused=!1,f(this)},e.exports=n},{"./defaultOptions":1,"./getHostKey":2,"is-string":6}],4:[function(t,e,o){function n(t){"use strict";function e(e,o){return r===!0?void 0===o?{}:"string"==typeof o?i(o):o:t(e)}return e.isBrowser=r,e.isServer=s,e}function i(t){return window[t]}var r=t("is-browser"),s=r===!1;e.exports=n},{"is-browser":5}],5:[function(t,e,o){e.exports=!0},{}],6:[function(t,e,o){"use strict";var n=String.prototype.valueOf,i=function(t){try{return n.call(t),!0}catch(t){return!1}},r=Object.prototype.toString,s="[object String]",u="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(t){return"string"==typeof t||"object"==typeof t&&(u?i(t):r.call(t)===s)}},{}]},{},[3])(3)});